{"id":"f30ebf98-9a8a-4316-be2c-39ec96b73544","name":"食药监-SHOP-INFO","sample":"","parser":{"delimit":"\t","fields":["record_time","trace_id","template_version","template_type","client_time","protocol_version","app_version","app_package_name","ias_client_version","ias_client_hsn_id","job_id","task_id","location","mobile","ias_client_ip","shop_id","shop_name","company_name","company_owner","company_address","business_scope","business_type","expire_time","license_num","shop_cert_photo1","shop_cert_photo2","waimai_type","geo_hash","local_logo","last_check_grade","place_grade","manage_grade","check_date"],"filter":[{"fields":["location","trace_id","template_type","app_version","ias_client_hsn_id","c@collector","app_package_name","job_id","c@path","ias_client_version","ias_client_ip","client_time","record_time","task_id","mobile","protocol_version"],"name":"removeFields"},{"script":"var waimai_type = event.get(\"waimai_type\")\r\nvar license_num = event.get(\"license_num\")\r\nif(license_num != null){\r\n    var tmp = license_num.toUpperCase()\r\n    event.put(\"license_num\",tmp)\r\n}\r\nif(waimai_type == 11 || waimai_type == 21 || waimai_type == 31 || waimai_type == 3){\r\n    \r\n        var a=[]\r\n        for (var key in event){\r\n         a.push(key);\r\n        }\r\n\r\n        for (var i=0;i<a.length;i++){\r\n            event.remove(a[i])\r\n        }\r\n}\r\n\r\n\r\nvar a=[]\r\nfor (var key in event){\r\nif(event.get(key) !== null &&　(event.get(key).toString().toLowerCase()==\"null\" || event.get(key).toString().length == 0))\r\n a.push(key);\r\n}\r\n\r\nfor (var i=0;i<a.length;i++){\r\n   event.remove(a[i])\r\n}\r\n\r\nvar shop_cert_photo1 = event.get(\"shop_cert_photo1\")\r\nvar shop_cert_photo2 = event.get(\"shop_cert_photo2\")\r\nif(shop_cert_photo1 == null && shop_cert_photo2 == null){\r\n    event.put(\"question_type\",\"112\")\r\n}\r\n\r\n\r\n","type":"js","name":"script"}],"metadata":[["question_type","string",""],["company_address","string",""],["waimai_type","string",""],["shop_name","string",""],["company_name","string",""],["last_check_grade","string",""],["local_logo","string",""],["check_date","string",""],["shop_cert_photo1","string",""],["shop_cert_photo2","string",""],["business_scope","string",""],["company_owner","string",""],["expire_time","string",""],["shop_id","string",""],["business_type","string",""],["template_version","string",""],["place_grade","string",""],["license_num","string",""],["geo_hash","string",""],["manage_grade","string",""],["error","string",""]],"name":"delimit"},"datasource":"49269341-19eb-49a4-9377-94d9a516360f","properties":[{"id":"2c2ae3a3-b1cd-4438-b78c-14915875e99e","type":"string","key":"question_type","sample":"None"},{"id":"c372495a-5d7f-48fd-8e51-ce44a27b9648","type":"string","key":"company_address"},{"id":"6e57de31-f0da-47c5-9ce7-7c13e713d519","type":"string","key":"waimai_type","sample":"2"},{"id":"c03c37e7-eda0-453e-90b4-337e910aba1a","type":"string","key":"shop_name","sample":"御膳客黄焖鸡米饭"},{"id":"ede141a9-69be-4864-b8cf-5ef1a7447898","type":"string","key":"company_name"},{"id":"b3b0d1c5-b0ea-4677-941d-83209ddc8301","type":"string","key":"last_check_grade"},{"id":"23760adb-0766-466a-8fe5-8988eb0d0121","type":"string","key":"local_logo"},{"id":"be2af751-948a-479f-9331-77993c600ff3","type":"string","key":"check_date","sample":""},{"id":"a33f5f4c-6b32-4d2b-bfa7-00e2c24f2556","type":"string","key":"shop_cert_photo1","sample":"http://p1.meituan.net/waimaipoi/4e579a8a639ac66ad1c89ce8e43cad68125080.jpg"},{"id":"4dd09ca6-4baa-42a0-9310-760de5b015d6","type":"string","key":"shop_cert_photo2","sample":"http://p1.meituan.net/waimaipoi/2ad4de8884bc4fc19a23deaba9891bf7218376.jpg"},{"id":"3247ec7c-7c01-42e6-85bb-de2e37aca285","type":"string","key":"business_scope"},{"id":"3d0015c3-4dcf-4278-b6f2-6049fd8f6b37","type":"string","key":"company_owner"},{"id":"6cf6cf65-07a8-4b44-b17d-951111d4b427","type":"string","key":"expire_time"},{"id":"ac08ce24-9ce0-4595-a982-76ef454da679","type":"string","key":"shop_id","sample":"1_1054"},{"id":"c6f08cc4-04ba-42bf-864b-dfa16640b8f2","type":"string","key":"business_type"},{"id":"3e92e54b-1d17-4af7-9cdb-ac8ac6c981f2","type":"string","key":"template_version","sample":"1.0.0"},{"id":"29466b35-9f85-4b7e-99d2-9cb0c093526a","type":"string","key":"place_grade"},{"id":"a1dad689-623d-440b-a592-19c0a567f49e","type":"string","key":"license_num","sample":"SP5306251060000267"},{"id":"88064c40-fc1d-493f-af61-17231c44359d","type":"string","key":"geo_hash"},{"id":"57249dd0-a562-4a4f-9dd5-9254cebdf6f6","type":"string","key":"manage_grade"},{"id":"9f123e51-2de4-4a73-8571-f4d03a7ecd24","type":"string","key":"error","sample":"TypeError: null has no such function \"toString\" in <eval> at line number 4"}],"isSample":0}