{"id":"ad047710-1013-4938-8e92-f17ad4b45a24","name":"食药监-美团数据条件输出","writeType":"switch","data":{"field":"schema","type":"Contain","writers":[["shop_list",{"id":"92cc68d0-13cf-40d2-b560-35502f1b73cb","cluster":"NX_ES","hostPorts":[["MVP-HADOOP40",9200]],"index":"tbl_es_takeout_shop_infoP3","idFields":"shop_id","number_of_shards":1,"number_of_replicas":1,"numeric_detection":false,"date_detection":false,"enable_size":false,"name":"es6","cache":1000}],["shop_comment_list",{"id":"1c41f1e6-fb6f-4322-9de4-a5cabb8e43de","cluster":"NX_ES","hostPorts":[["MVP-HADOOP40",9200]],"index":"tbl_es_takeout_shop_comment_detailP3","idFields":"shop_id","number_of_shards":5,"number_of_replicas":1,"numeric_detection":false,"date_detection":false,"enable_size":false,"name":"es6","cache":1000}],["shop_info",{"id":"bebcb385-8378-402e-854f-61646a30f71d","cluster":"NX_ES","hostPorts":[["MVP-HADOOP40",9200]],"index":"tbl_es_takeout_shop_infoP3","indexType":"data","idFields":"shop_id","isScript":true,"script":"\n if((params.shop_cert_photo1 !=null && params.shop_cert_photo2!=null)){\n\n \tctx._source.shop_cert_photo1 =params.shop_cert_photo1;\n \tctx._source.shop_cert_photo2 =params.shop_cert_photo2;\n } else if (params.shop_cert_photo1 !=null || params.shop_cert_photo2!=null ){\n   \n\tif(ctx._source.shop_cert_photo1 == null && ctx._source.shop_cert_photo2 == null) {\n\t\t if(params.shop_cert_photo1 != null){\n\t    \tctx._source.shop_cert_photo1 =params.shop_cert_photo1;\n\t     }\n\t     if(params.shop_cert_photo2 != null){\n\t    \tctx._source.shop_cert_photo2 =params.shop_cert_photo2;\n\t     }\n\t }\n }\n \n \n \n \nif(params.shop_id != null){\nctx._source.shop_id =params.shop_id;\n}\nif(params.company_name != null){\nctx._source.company_name =params.company_name;\n}\nif(params.company_owner != null){\nctx._source.company_owner =params.company_owner;\n}\nif(params.company_address != null){\nctx._source.company_address =params.company_address;\n}\nif(params.business_scope != null){\nctx._source.business_scope =params.business_scope;\n}\nif(params.business_type != null){\nctx._source.business_type =params.business_type;\n}\nif(params.expire_time != null){\nctx._source.expire_time =params.expire_time;\n}\nif(params.license_num != null){\nctx._source.license_num =params.license_num.toUpperCase();\n}\nif(params.geo_hash != null){\nctx._source.geo_hash =params.geo_hash;\n}\nif(params.local_logo != null){\nctx._source.local_logo =params.local_logo;\n}\nif(params.last_check_grade != null){\nctx._source.last_check_grade =params.last_check_grade;\n}\nif(params.place_grade != null){\nctx._source.place_grade =params.place_grade;\n}\nif(params.manage_grade != null){\nctx._source.manage_grade =params.manage_grade;\n}\nif(params.check_date != null){\nctx._source.check_date =params.check_date;\n}\nif(params['c@receive_time'] != null){\nctx._source['c@receive_time'] =params['c@receive_time'];\n}","number_of_shards":5,"number_of_replicas":1,"numeric_detection":false,"date_detection":true,"enable_size":false,"persisRef":{"name":"none"},"name":"es6","cache":1000}]],"default":{"id":"60cc9458-5f15-4ea6-aa99-dd270e19a216","host":"MVP-HADOOP26:8020,MVP-HADOOP27:8020","port":9000,"path":{"path":"/data/takeout/meituan/ero/","contentType":{"name":"json","encoding":"UTF-8"},"persisRef":{"name":"none"},"cache":0,"name":"file"},"authentication":"NONE","properties":{"connectTimeout":"300"},"name":"hdfs","cache":1000},"name":"switch","cache":1000},"isSample":0}